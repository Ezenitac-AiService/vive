# [초급 개발자 양성과정] Flask 라우팅(Routing) 완전 정복! 🚀

안녕하세요, 미래의 멋진 개발자 여러분! 😊
오늘은 웹 개발의 핵심 개념 중 하나인 **라우팅(Routing)**에 대해 배워보겠습니다. `route.py` 파일에 있는 코드를 하나씩 살펴보면서, Flask 프레임워크가 어떻게 URL 요청을 처리하는지 쉽고 재미있게 알아볼 거예요!

## 1. 라우팅이란 무엇일까요?

"라우팅"이라는 단어가 조금 어렵게 들릴 수 있지만, 사실 아주 간단한 개념입니다. 
우리가 웹사이트에 접속할 때 주소창에 URL(예: `www.google.com`)을 입력하죠? 라우팅은 **"이 URL 주소로 요청이 들어오면, 어떤 함수(기능)를 실행시켜야 할까?"** 를 정해주는 규칙과 같습니다.

마치 건물의 안내 데스크에서 "301호 회의실은 어디인가요?"라고 물었을 때, "저쪽 복도 끝에서 오른쪽입니다"라고 안내해주는 것과 같아요.

**`route.py` 코드 훑어보기:**
```python
from flask import Flask  # Flask 라이브러리에서 Flask 클래스를 가져옵니다. 
app = Flask(__name__)    # Flask 애플리케이션 객체를 생성합니다.

# ... 라우팅 규칙들 ...

if __name__ == '__main__' : # 이 파일이 직접 실행될 때만
    app.run(debug=True)   # 개발용 서버를 실행합니다.
```
모든 라우팅은 `app` 이라는 Flask 애플리케이션 객체를 통해 이루어집니다. 자, 이제 진짜 라우팅 규칙들을 살펴볼까요?

---

## 2. 가장 기본적인 라우팅: 정적 라우팅

가장 기본이 되는 라우팅입니다. 정해진 URL 주소와 함수를 1:1로 짝지어 줍니다.

**`route.py` 코드:**
```python
@app.route('/')
def index() :
    return 'root : /'
```
- `@app.route('/')`: "만약 사용자가 우리 웹사이트의 가장 기본 주소(`/`)로 접속하면," 이라는 뜻의 **데코레이터**입니다.
- `def index()`: "/ 주소로 접속했을 때 실행될 함수"입니다.
- `return 'root : /'`: 함수가 실행된 후, 사용자에게 보여줄 결과입니다. 웹 브라우저 화면에 `root : /` 라는 글자가 나타나게 됩니다.

---

## 3. 주소가 바뀌면 내용도 바뀐다: 동적 라우팅

쇼핑몰 사이트를 생각해보세요. `site.com/products/1` 은 1번 상품, `site.com/products/2` 는 2번 상품을 보여줍니다. 이렇게 URL의 일부가 변하면서 다른 내용을 보여주는 것을 **동적 라우팅**이라고 합니다.

**`route.py` 코드:**
```python
@app.route('/user/<option>')
def user(option):
    return option
```
- `<option>`: 이 부분이 바로 동적 라우팅의 핵심입니다. `< >` 안에 변수 이름을 넣어주면, URL의 이 위치에 오는 어떤 글자든 `option`이라는 변수에 담기게 됩니다.
- `def user(option)`: 데코레이터에서 받은 `option` 변수를 함수의 인자로 받습니다.

**실행 예시:**
- `http://127.0.0.1:5000/user/list`  -> `option` 변수에 `'list'`가 담겨, 화면에 `list`가 출력됩니다.
- `http://127.0.0.1:5000/user/view` -> `option` 변수에 `'view'`가 담겨, 화면에 `view`가 출력됩니다.

---

## 4. 하나의 함수, 여러 개의 주소

가끔 `/user` 와 `/user/` 처럼, 주소 끝에 `/`가 붙거나 안 붙거나 같은 페이지를 보여줘야 할 때가 있습니다. 이럴 땐 데코레이터를 여러 개 쌓아서 하나의 함수에 연결할 수 있습니다.

**`route.py` 코드:**
```python
@app.route('/user')
@app.route('/user/')
def user_base():
    return 'user base'
```
이제 사용자가 `/user`로 접속하든, `/user/`로 접속하든 `user_base` 함수가 실행되어 `user base`라는 동일한 결과를 보여줍니다.

---

## 5. 정적 + 동적 라우팅의 조합

정적 라우팅과 동적 라우팅을 하나의 함수에서 동시에 처리할 수도 있습니다.

**`route.py` 코드:**
```python
@app.route('/board')
@app.route('/board/')
@app.route('/board/<option>')
def board(option=None) :
    if option :
        data = option
    else :
        data = 'base'
    return data
```
- `def board(option=None)`: 함수의 인자에 `None`이라는 기본값을 설정했습니다.
- `/board` 또는 `/board/`로 접속하면 `option` 변수가 없으므로 기본값인 `None`이 됩니다. `if option:` 조건문이 거짓이 되어 `data`는 `'base'`가 됩니다.
- `/board/free` 와 같이 접속하면 `option` 변수에 `'free'`가 담깁니다. `if option:` 조건문이 참이 되어 `data`는 `'free'`가 됩니다.

---

## 6. URL로 받은 값의 "타입" 이해하기

**중요!** 동적 라우팅으로 URL에서 변수를 받으면, 그 값은 **기본적으로 모두 문자열(string) 타입**입니다.

**`route.py` 코드:**
```python
@app.route('/reply/<option>/<number>')
def reply(option, number):
    try:
        print(type(number)) # <class 'str'> 라고 출력될 거예요!
        number = int(number) # 문자열을 정수(int)로 변환
    except Exception as e:
        # 만약 숫자로 변환할 수 없는 글자가 들어오면 오류가 발생합니다.
        return '숫자를 입력해야합니다!!!'
    return f'option : {option} 
 number : {number}'
```
- 사용자가 `/reply/notice/10` 으로 접속하면 `number` 변수에는 숫자 `10`이 아닌, 문자열 `'10'`이 담깁니다.
- 따라서 숫자처럼 계산하려면 `int(number)` 처럼 **타입 변환**을 꼭 해주어야 합니다.
- 만약 사용자가 `/reply/notice/abc` 처럼 숫자가 아닌 값을 입력하면 `int('abc')`에서 오류가 발생하므로, `try-except` 구문으로 처리해주는 것이 안전합니다.

---

## 7. 더 똑똑한 라우팅: 타입 컨버터 활용

매번 `int()`로 변환하는 것이 번거롭죠? Flask는 더 똑똑한 방법을 제공합니다. 바로 **타입 컨버터**입니다.

**`route.py` 코드:**
```python
@app.route('/mypage/<string:option>/<int:number>')
def mypage(option, number):
    print('option', type(option)) # <class 'str'>
    print('number', type(number)) # <class 'int'>
    return f'option : {option} 
 number : {number}'
```
- `<int:number>`: 이렇게 변수 이름 앞에 `<타입이름:`을 붙여주면, Flask가 알아서 해당 타입으로 변환해주고, 타입이 맞지 않으면 페이지를 찾을 수 없다는 `404 Not Found` 오류를 보여줍니다.
- 이 방법을 사용하면 `try-except` 코드를 쓸 필요가 없어서 코드가 훨씬 깔끔해집니다!

**실행 예시:**
- `http://127.0.0.1:5000/mypage/edit/5` -> 정상 작동! `number`는 정수 `5`
- `http://127.0.0.1:5000/mypage/delete/abc` -> **404 Not Found 오류!** Flask가 자동으로 `abc`는 정수가 아니라고 판단하여 이 라우팅 규칙과 맞지 않다고 알려줍니다.

---

### 🎉 정리

오늘 우리는 Flask의 라우팅에 대해 배웠습니다.
- **정적 라우팅**: 정해진 주소와 함수 연결 (`@app.route('/path')`)
- **동적 라우팅**: 변하는 주소와 함수 연결 (`@app.route('/path/<variable>')`)
- **URL 변수**: 기본은 문자열(string) 타입이며, `int()` 등으로 변환 가능
- **타입 컨버터**: `<int:var>`, `<string:var>` 등을 사용해 자동으로 타입을 지정하고 검사

이제 여러분은 사용자의 요청에 따라 다양한 웹페이지를 보여줄 수 있는 기초를 다졌습니다! 수고 많으셨습니다. 👏👏👏
